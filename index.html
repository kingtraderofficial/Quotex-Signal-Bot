<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>King Trader | Ultra Pro Max Bot</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;700;900&display=swap" rel="stylesheet">
    <style>
        :root {
            --royal-blue: #0046ad;
            --king-blue: #007AFF;
            --vip-gold: linear-gradient(135deg, #d4af37 0%, #f9d423 100%);
            --buy: #00c853;
            --sell: #ff1744;
            --wait: #ff9800;
        }

        * { margin: 0; padding: 0; box-sizing: border-box; font-family: 'Poppins', sans-serif; }
        body { background: #f0f4f8; min-height: 100vh; overflow-x: hidden; }

        /* --- IPHONE STYLE BLUR BACKGROUND --- */
        .animated-bg {
            position: fixed; inset: 0; z-index: -1;
            background: radial-gradient(circle at 20% 30%, #d4e4ff 0%, transparent 50%),
                        radial-gradient(circle at 80% 70%, #fff1f1 0%, transparent 50%),
                        radial-gradient(circle at 50% 50%, #e8ffed 0%, transparent 50%);
            filter: blur(70px); opacity: 0.7; animation: bgMove 20s infinite alternate;
        }
        @keyframes bgMove { 0% { transform: scale(1); } 100% { transform: scale(1.1); } }

        /* --- SECURITY PAGE --- */
        #auth-screen {
            position: fixed; inset: 0; background: white; z-index: 10000;
            display: flex; flex-direction: column; align-items: center; justify-content: center;
        }
        .auth-card { background: white; padding: 45px; border-radius: 35px; text-align: center; box-shadow: 0 15px 60px rgba(0,0,0,0.1); width: 90%; max-width: 420px; border: 1px solid #eee; }
        .auth-card input { width: 100%; padding: 18px; border-radius: 15px; border: 2px solid #ddd; font-size: 20px; text-align: center; margin-bottom: 25px; outline: none; }
        .wa-btn-auth { color: #25D366; text-decoration: none; font-weight: 800; display: flex; align-items: center; justify-content: center; gap: 10px; }

        /* --- HEADER --- */
        header {
            background: rgba(255,255,255,0.9); backdrop-filter: blur(20px);
            padding: 15px 25px; display: flex; align-items: center; justify-content: space-between;
            position: sticky; top: 0; z-index: 1000; border-bottom: 3px solid var(--king-blue);
        }
        .h-left { display: flex; align-items: center; gap: 15px; font-weight: 900; font-size: 20px; color: var(--royal-blue); }
        .clock { font-size: 14px; font-weight: 800; color: #444; }
        .h-right { display: flex; align-items: center; gap: 8px; font-weight: 900; font-size: 13px; color: #00c853; }
        .live-dot { width: 10px; height: 10px; background: #00c853; border-radius: 50%; animation: pulse 1s infinite; }
        @keyframes pulse { 0% { transform: scale(1); opacity: 1; } 50% { transform: scale(1.3); opacity: 0.4; } }

        /* --- SIDEBAR --- */
        #sidebar {
            position: fixed; left: -320px; top: 0; width: 300px; height: 100%;
            background: white; z-index: 2001; transition: 0.5s cubic-bezier(0.4, 0, 0.2, 1);
            padding: 80px 20px; box-shadow: 10px 0 50px rgba(0,0,0,0.1);
        }
        #sidebar.active { left: 0; }
        .sidebar-btn {
            display: flex; align-items: center; padding: 16px; text-decoration: none;
            color: #333; font-weight: 700; border-radius: 15px; margin-bottom: 12px;
            box-shadow: 0 4px 10px rgba(0,0,0,0.05); transition: 0.3s;
        }
        .sidebar-btn:hover { transform: translateX(10px); background: #f0f7ff; color: var(--king-blue); }
        .sidebar-btn i { margin-right: 15px; font-size: 20px; }
        .icon-wa { color: #25D366; } .icon-yt { color: #FF0000; } .icon-fb { color: #1877F2; } .icon-tk { color: #000; }

        /* --- 3D BUTTONS --- */
        .top-hero { display: flex; gap: 15px; padding: 25px; max-width: 1200px; margin: 0 auto; }
        .btn-3d {
            flex: 1; padding: 20px; border-radius: 20px; text-align: center; text-decoration: none;
            color: white; font-weight: 900; transition: 0.2s; box-shadow: 0 8px 0 rgba(0,0,0,0.1); border: none; cursor: pointer;
        }
        .btn-blue { background: var(--king-blue); }
        .btn-gold { background: var(--vip-gold); color: #5c4000; }
        .btn-3d:active { transform: translateY(5px); box-shadow: 0 3px 0 rgba(0,0,0,0.1); }

        /* --- GRID & PAIR BOXES --- */
        .grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(330px, 1fr)); gap: 30px; padding: 25px; max-width: 1600px; margin: 0 auto; }
        .pair-box {
            background: white; border-radius: 40px; padding: 22px; text-align: center;
            border-top: 8px solid var(--king-blue); border-bottom: 8px solid var(--king-blue);
            border-left: 2px solid var(--king-blue); border-right: 2px solid var(--king-blue);
            transition: 0.4s; position: relative; box-shadow: 0 10px 40px rgba(0,0,0,0.04);
        }
        .pair-title { font-size: 24px; font-weight: 900; color: var(--royal-blue); margin-bottom: 15px; transition: 0.3s; }

        /* METER CROP (FULLY FIXED) */
        .meter-container {
            height: 140px; border-radius: 20px; overflow: hidden; margin-bottom: 15px;
            position: relative; border: 1px solid #f0f0f0; background: #fff;
        }
        .meter-container iframe { position: absolute; top: -38px; left: 0; width: 100%; height: 215px; border: none; pointer-events: none; }

        .signal-res { font-size: 16px; font-weight: 900; margin-bottom: 20px; min-height: 40px; display: flex; align-items: center; justify-content: center; }
        .extract-btn {
            width: 100%; padding: 18px; border-radius: 50px; border: none;
            background: #111; color: white; font-weight: 800; cursor: pointer; transition: 0.4s;
        }
        .extract-btn:disabled { background: #ccc; cursor: not-allowed; }

        /* DYNAMIC COLORS */
        .box-buy { border-color: var(--buy) !important; box-shadow: 0 0 35px rgba(0, 200, 83, 0.4); }
        .box-sell { border-color: var(--sell) !important; box-shadow: 0 0 35px rgba(255, 23, 68, 0.4); }
        .box-wait { border-color: var(--wait) !important; box-shadow: 0 0 35px rgba(255, 152, 0, 0.4); }

        /* MODAL */
        #policy-modal { display: none; position: fixed; inset: 0; background: rgba(0,0,0,0.5); z-index: 5000; backdrop-filter: blur(15px); padding: 25px; }
        .policy-card { background: white; max-width: 700px; margin: 40px auto; border-radius: 35px; padding: 45px; max-height: 80vh; overflow-y: auto; }
        .policy-card li { margin-bottom: 12px; font-size: 14px; line-height: 1.6; color: #444; }
    </style>
</head>
<body>

    <div class="animated-bg"></div>

    <!-- SECURITY SCREEN -->
    <div id="auth-screen">
        <div class="auth-card">
            <h1 style="font-weight: 900; color: var(--royal-blue); margin-bottom: 10px;">KING ACCESS</h1>
            <p style="color:#777; margin-bottom:30px; font-size:14px;">Terminal v7.0 Professional</p>
            <input type="password" id="auth-key" placeholder="Enter Security Code">
            <button class="btn-3d btn-blue" style="width:100%;" onclick="startTerminal()">INITIALIZE SYSTEM</button>
            <a href="https://wa.me/923064391353" class="wa-btn-auth"><i class="fab fa-whatsapp"></i> Get Code from Admin</a>
        </div>
    </div>

    <!-- HEADER -->
    <header>
        <div class="h-left">
            <i class="fas fa-bars-staggered" onclick="toggleSidebar()" style="cursor:pointer; font-size: 24px;"></i>
            <span>King Trader</span>
        </div>
        <div id="h-clock" class="clock">00:00:00 AM</div>
        <div class="h-right">
            <div class="live-dot"></div> LIVE
        </div>
    </header>

    <!-- SIDEBAR -->
    <nav id="sidebar">
        <a href="https://wa.me/923064391353" class="sidebar-btn"><i class="fab fa-whatsapp icon-wa"></i> WhatsApp Support</a>
        <a href="https://www.facebook.com/" class="sidebar-btn"><i class="fab fa-facebook icon-fb"></i> Facebook Group</a>
        <a href="https://www.youtube.com/@kingtraderofficial45" class="sidebar-btn"><i class="fab fa-youtube icon-yt"></i> YouTube Official</a>
        <a href="https://www.tiktok.com/@kingtraderofficail" class="sidebar-btn"><i class="fab fa-tiktok icon-tk"></i> TikTok Profile</a>
        <a href="https://broker-qx.pro/sign-up/?lid=1696715" class="sidebar-btn"><i class="fas fa-chart-line" style="color:#007AFF;"></i> Register Quotex</a>
        <a href="#" class="sidebar-btn" onclick="togglePolicy()"><i class="fas fa-shield-halved" style="color:#666;"></i> Terms & Rules</a>
    </nav>

    <!-- TOP BUTTONS -->
    <div class="top-hero">
        <a href="https://broker-qx.pro/sign-up/?lid=1696715" class="btn-3d btn-blue">REGISTER QUOTEX</a>
        <a href="https://wa.me/923064391353" class="btn-3d btn-gold">VIP ACCESS PREMIUM</a>
    </div>

    <!-- GRID -->
    <div class="grid" id="pairs-grid"></div>

    <!-- POLICY MODAL -->
    <div id="policy-modal">
        <div class="policy-card">
            <h2 style="text-align: center; color: var(--royal-blue); margin-bottom: 25px;">Professional Rules</h2>
            <ul style="padding-left: 20px;">
                <li>1. <b>Strict Capital:</b> Never invest more than 2% of your balance per trade.</li>
                <li>2. <b>The $35 Standard:</b> Standardize your trades for consistent profit growth.</li>
                <li>3. <b>Crypto Timing:</b> Execute Crypto signals exactly at the 00s candle start.</li>
                <li>4. <b>Forex Timing:</b> Wait for "WAIT" signals to clear. Only trade on Buy/Sell.</li>
                <li>5. <b>Global Lock:</b> One signal at a time ensures total focus on the trade.</li>
                <li>6. <b>Cooldown:</b> Respect the 2-minute cooldown to avoid emotional revenge trading.</li>
                <li>7. <b>Meter Consensus:</b> Always check if the Meter matches the AI signal.</li>
                <li>8. <b>News:</b> Strictly avoid trading during high-impact (Red Folder) news events.</li>
                <li>9. <b>Sessions:</b> Best results during London and New York overlaps.</li>
                <li>10. <b>Targets:</b> Once you reach 10% daily profit, withdraw and stop trading.</li>
                <li>11. <b>Loss Management:</b> If you face 3 consecutive losses, close the bot for 6 hours.</li>
                <li>12. <b>Responsibility:</b> You are solely responsible for your financial outcomes.</li>
            </ul>
            <button class="btn-3d btn-blue" style="width: 100%; margin-top: 30px;" onclick="togglePolicy()">ACCEPT</button>
        </div>
    </div>

    <script>
        const forex = ["EURUSD", "GBPUSD", "USDJPY", "AUDUSD", "USDCAD", "EURJPY", "EURGBP", "AUDJPY", "NZDUSD", "USDCHF"];
        const crypto = ["BTCUSDT", "ETHUSDT", "SOLUSDT", "LTCUSDT", "XRPUSDT", "DOGEUSDT"];
        const all = [...forex, ...crypto];
        
        let globalLock = false;
        let cooldowns = {};

        function startTerminal() {
            if(btoa(document.getElementById('auth-key').value) === "cGtzaWduYWxza2luZzkwMA==") {
                document.getElementById('auth-screen').style.display = 'none';
            } else { alert("ACCESS DENIED!"); }
        }

        function toggleSidebar() { document.getElementById('sidebar').classList.toggle('active'); }
        function togglePolicy() { 
            const m = document.getElementById('policy-modal');
            m.style.display = (m.style.display === 'block') ? 'none' : 'block';
        }

        setInterval(() => {
            document.getElementById('h-clock').innerText = new Date().toLocaleTimeString('en-US', { hour12: true });
        }, 1000);

        const container = document.getElementById('pairs-grid');
        all.forEach(p => {
            const sym = p.includes('USDT') ? p : `FX_IDC:${p}`;
            const box = document.createElement('div');
            box.className = 'pair-box';
            box.id = `box-${p}`;
            box.innerHTML = `
                <div class="pair-title" id="title-${p}">${p.replace('USDT', '')}</div>
                <div class="meter-container">
                    <iframe src="https://s.tradingview.com/embed-widget/technical-analysis/?symbol=${sym}&interval=1m&colorTheme=light&isTransparent=true"></iframe>
                </div>
                <div class="signal-res" id="sig-${p}">--- READY ---</div>
                <button class="extract-btn" id="btn-${p}" onclick="processRequest('${p}')">EXTRACT SIGNAL</button>
            `;
            container.appendChild(box);
        });

        async function processRequest(pair) {
            if(globalLock) { alert("Please wait! System busy with another pair."); return; }
            const now = Date.now();
            if(cooldowns[pair] && now < cooldowns[pair]) {
                alert(`Cooldown! Wait ${Math.ceil((cooldowns[pair] - now) / 1000)}s.`); return;
            }

            globalLock = true;
            disableButtons(true);
            const sigBox = document.getElementById(`sig-${pair}`);
            const card = document.getElementById(`box-${pair}`);
            const title = document.getElementById(`title-${pair}`);

            sigBox.innerText = "ANALYZING API...";
            sigBox.style.color = "#444";
            card.className = "pair-box"; 

            try {
                if(crypto.includes(pair)) {
                    // Real Binance Logic
                    const res = await fetch(`https://api.binance.com/api/v3/klines?symbol=${pair}&interval=1m&limit=1`).then(r => r.json());
                    const candle = res[0];
                    const isBuy = parseFloat(candle[4]) > parseFloat(candle[1]);
                    showSignal(pair, isBuy ? "BUY ⬆️" : "SELL ⬇️", isBuy ? "var(--buy)" : "var(--sell)");
                } else {
                    // Forex Logic with WAIT Randomization
                    const chance = Math.random();
                    if(chance < 0.35) {
                        showSignal(pair, "WAIT - NO SIGNAL ⚠️", "var(--wait)");
                    } else {
                        const isBuy = Math.sin(Date.now()) > 0;
                        showSignal(pair, isBuy ? "BUY ⬆️" : "SELL ⬇️", isBuy ? "var(--buy)" : "var(--sell)");
                    }
                }
            } catch(e) { sigBox.innerText = "API ERROR"; unlockSystem(); }
        }

        function showSignal(pair, msg, color) {
            const sigBox = document.getElementById(`sig-${pair}`);
            const card = document.getElementById(`box-${pair}`);
            const title = document.getElementById(`title-${pair}`);

            setTimeout(() => {
                sigBox.innerText = msg;
                sigBox.style.color = color;
                title.style.color = color;
                if(msg.includes("BUY")) card.classList.add("box-buy");
                else if(msg.includes("SELL")) card.classList.add("box-sell");
                else card.classList.add("box-wait");

                cooldowns[pair] = Date.now() + 120000; // 2m Cooldown
                setTimeout(() => {
                    resetPair(pair);
                    globalLock = false;
                    disableButtons(false);
                }, 5000); // Reset UI after 5s
            }, 1500);
        }

        function disableButtons(status) {
            document.querySelectorAll('.extract-btn').forEach(b => b.disabled = status);
        }

        function resetPair(pair) {
            document.getElementById(`box-${pair}`).className = "pair-box";
            document.getElementById(`sig-${pair}`).innerText = "--- READY ---";
            document.getElementById(`sig-${pair}`).style.color = "#333";
            document.getElementById(`title-${pair}`).style.color = "var(--royal-blue)";
        }

        document.addEventListener('click', (e) => {
            const sb = document.getElementById('sidebar');
            if(!sb.contains(e.target) && !e.target.classList.contains('fa-bars-staggered') && sb.classList.contains('active')) sb.classList.remove('active');
        });
    </script>
</body>
</html>
